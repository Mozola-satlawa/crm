<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>UMOWA – PW ARKON • umowa2.html</title>
<meta name="description" content="Edytowalny szablon umowy PW ARKON z komponentami (PC, piec, PV, ocieplenie, stolarka/dodatki), polami do wypełnienia oraz auto-obliczeniami netto/VAT/brutto.">
<style>
  :root{
    --bg:#0b1020; --card:#0f1636; --ink:#e8edff; --muted:#aeb8da; --accent:#4cc9f0;
    --line:#263168; --ok:#2b8a57; --warn:#b37a1a; --bad:#a93a4b; --paper:#0e1433;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#0a0f1e,#0c1230 60%,#0a0f1e);color:var(--ink);font:15px/1.5 system-ui,Segoe UI,Roboto,Arial}

  /* Nav + layout */
  nav{position:sticky;top:0;z-index:10;background:#10183b;border-bottom:1px solid #223065;padding:10px 14px;display:flex;gap:10px;flex-wrap:wrap}
  nav a{color:#cfe1ff;text-decoration:none;padding:6px 10px;border:1px solid #2a3a75;border-radius:999px}
  nav a:hover{background:#223160}
  .wrap{max-width:980px;margin:18px auto;padding:0 16px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:0 0 12px;align-items:center;justify-content:space-between}
  .btn{background:#233261;border:1px solid #3a4ca3;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn.ghost{background:transparent;border:1px dashed #3a4ca3}
  .btn.ok{background:#194d34;border-color:#2b8a57}
  .card{background:linear-gradient(180deg,#111a3e,#121f4a);border:1px solid #2b3a77;border-radius:14px;padding:16px}
  .doc{background:var(--paper);border:1px solid #2b3a77;border-radius:12px;padding:22px}

  /* Typografia i kolory */
  .muted{color:var(--muted)} .small{font-size:13px;color:var(--muted)}
  h1,h2,h3{margin:0 0 10px}
  h1{font-size:22px} h2{font-size:18px;margin-top:16px} h3{font-size:15px;margin-top:10px}

  /* Tabele */
  table{width:100%;border-collapse:separate;border-spacing:0}
  th,td{border:1px solid #31417f;padding:8px;vertical-align:top}
  th{background:#121e49;color:#cfe1ff;text-align:left;font-weight:600}
  tr:nth-child(even) td{background:#0f1a44}

  /* Pola do uzupełnienia */
  .fill{
    display:inline-block; min-width:var(--w,20ch);
    border-bottom:1px solid #4a5bb6; padding:1px 2px; line-height:1.6;
  }
  [contenteditable="true"] .fill{outline-offset:2px}

  /* utility width classes to avoid inline styles */
  .w-6ch  { --w:6ch; }
  .w-8ch  { --w:8ch; }
  .w-10ch { --w:10ch; }
  .w-12ch { --w:12ch; }
  .w-14ch { --w:14ch; }
  .w-16ch { --w:16ch; }
  .w-18ch { --w:18ch; }
  .w-20ch { --w:20ch; }
  .w-24ch { --w:24ch; }
  .w-28ch { --w:28ch; }
  .w-30ch { --w:30ch; }
  .w-34ch { --w:34ch; }
  .w-36ch { --w:36ch; }
  .w-40ch { --w:40ch; }
  .w-42ch { --w:42ch; }
  .w-48ch { --w:48ch; }
  .w-68ch { --w:68ch; }

  /* small layout helper */
  .mt-10 { margin-top:10px; }

  /* Wiersze, podpisy, ramki */
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .right{display:flex;gap:8px;justify-content:flex-end}
  .center{text-align:center}
  .signRow{display:flex;justify-content:space-between;gap:40px;margin-top:22px}
  .sign{width:44%;text-align:center}
  .box{border:1px dashed #3a4ca3;padding:10px;border-radius:10px;background:#0f1740}
  [contenteditable="true"]{outline:2px dashed #2b3a77;border-radius:6px;padding:4px}
  .pill{display:inline-block;background:#0d1530;border:1px dashed #2b3a77;border-radius:999px;padding:4px 8px;color:#aeb8da;font-size:12px}

  /* Kwota VAT przy polu VAT% */
  .vat-amt-out{ margin-left:.5rem; font-size:11px; opacity:.85 }

  /* Stopka do druku (Chrome/Edge) */
  .print-footer{
    position:fixed; left:0; right:0; bottom:0;
    font-size:12px; color:#777; padding:6px 12px;
    border-top:1px solid #ddd; background:#fff; display:none;
  }
  .print-footer .line{display:flex;justify-content:space-between;gap:12px}
  .print-footer .pnum::after{content:"Strona " counter(page) " / " counter(pages);}

  /* ===== Wydruk: skrócony i czytelny ===== */
  @page{ size:A4; margin:8mm; }
  @media print{
    /* ukryj UI */
    nav,.card.toolbar{display:none!important}

    /* białe tło + czarna typografia */
    html,body{background:#fff!important}
    body{color:#000!important; font-size:11.5px; line-height:1.22}

    .wrap{max-width:none;margin:0 auto;padding:0}
    .doc{background:#fff!important;border:0!important;padding:0!important;color:#000!important}

    /* nagłówki ciaśniej */
    h1{font-size:17px;margin:0 0 4px}
    h2{font-size:14px;margin:10px 0 4px}
    h3{font-size:12.5px;margin:6px 0 3px}
    .small{font-size:10.5px}

    /* listy ciaśniej */
    ol,ul{margin:4px 0 6px 16px}

    /* tabele kompaktowe */
    table{border-collapse:collapse;border-spacing:0; page-break-inside:auto}
    th,td{border:1px solid #000!important;padding:3.5px 5px;color:#000!important;background:#fff!important}
    tr{page-break-inside:avoid;page-break-after:auto}

    /* .fill krótsze o ~35% w druku */
    .fill{
      border-bottom:1px solid #000!important;
      min-width:calc(var(--w, 20ch) * 0.65) !important;
      line-height:1.2;
    }

    /* ramki i podpisy ciaśniej */
    .box{border-color:#000!important;background:#fff!important;padding:6px}
    .signRow{gap:18px;margin-top:12px}
    .sign{font-size:11.5px}

    /* linki neutralne */
    a{color:#000!important;text-decoration:none!important}

    /* pokaż stopkę z numerem stron */
    .print-footer{display:block}
  .vat-amt-out{ color:#000!important }
  }

  /* Table styles moved from inline */
  table.contract-table{ width:100%; border-collapse:collapse; }
  table.contract-table[border="1"]{ border:1px solid #000; }
  table.contract-table th, table.contract-table td{ padding:6px; vertical-align:top; }
  tbody#contractItems td.contract-empty{ text-align:center; color:#666; }
  .right-align{ text-align:right; }

</style>
</head>
<body>
  <nav>
        Nr umowy: <span class="fill w-18ch" data-bind="contract.no"></span>
        • Data: <span class="fill w-16ch" data-bind="contract.date"></span>
        • Miejsce: <span class="fill w-20ch" data-bind="city"></span>
  </nav>

  <div class="wrap">

      <h2>§1. Strony umowy</h2>
      <div class="box">
        <p><b>Wykonawca:</b> PW ARKON Czesław i Krystyna Sobaniak sp.j., ul. Fabryczna 12C, 59-170 Przemków, NIP: 5020038830, REGON: 020258190, e-mail: biuro@arkoncentrum.pl, tel. 511 514 818.</p>
        <p><b>Zamawiający (Klient):</b>
          <span class="fill w-48ch" data-bind="client.name"></span>,
          adres: <span class="fill w-48ch" data-bind="client.address"></span>,
          e-mail: <span class="fill w-28ch" data-bind="client.email"></span>,
          tel.: <span class="fill w-20ch" data-bind="client.phone"></span>.
        </p>
      </div>

      <h2>§2. Postanowienia ogólne</h2>
      <ol>
        <li>Umowa dotyczy wykonania i/lub dostawy oraz montażu urządzeń i materiałów zgodnie z niniejszą umową i załącznikami.</li>
        <li>Wykonawca oświadcza, że posiada kwalifikacje, doświadczenie oraz uprawnienia niezbędne do realizacji przedmiotu umowy, a czynności będą wykonywane zgodnie z <i>sztuką budowlaną</i>, właściwymi normami i przepisami prawa.</li>
        <li>Integralną częścią umowy są: <b>Załącznik nr 1 – Specyfikacja/Oferta</b>, <b>Załącznik nr 2 – Protokół odbioru</b>, <b>Załącznik nr 3 – OWU</b> (Ogólne Warunki Umowy), <b>Załącznik nr 4 – Karta gwarancyjna</b>, ewentualnie dokumentacja projektowa i schematy.</li>
      </ol>

      <h2>§3. Przedmiot umowy – komponenty i parametry</h2>
      <p class="small">Uzupełnij pola podkreślone. Niepotrzebne wiersze możesz skasować (dokument jest edytowalny).</p>

      <!-- 3.1 Pompa ciepła -->
      <h3>3.1. Pompa ciepła</h3>
      <table aria-label="Pompa ciepła" class="component">
        <tbody>
          <tr><th>Producent / Model</th><td><span class="fill w-40ch"></span></td></tr>
          <tr><th>Moc [kW]</th><td><span class="fill w-10ch"></span></td></tr>
          <tr><th>Jedn. zewnętrzna / wewnętrzna</th><td><span class="fill w-30ch"></span></td></tr>
          <tr><th>Bufor / Zawór 3D</th><td><span class="fill w-24ch"></span></td></tr>
          <tr><th>Ilość [szt.]</th><td><span class="fill w-10ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
      </table>
      <p class="small">Dodatki PC: zasobnik c.w.u. <span class="fill w-10ch"></span> l, naczynie przeponowe <span class="fill w-8ch"></span> l, zawory odcinające <span class="fill w-10ch"></span>, izolacje <span class="fill w-10ch"></span>, uruchomienie serwisowe <span class="fill w-12ch"></span>.</p>

      <!-- 3.2 Piec / Kocioł -->
      <h3>3.2. Piec / Kocioł</h3>
      <table aria-label="Piec / Kocioł" class="component">
        <tbody>
          <tr><th>Typ (gaz/elek/stałe)</th><td><span class="fill w-28ch"></span></td></tr>
          <tr><th>Marka / Model</th><td><span class="fill w-40ch"></span></td></tr>
          <tr><th>Moc [kW]</th><td><span class="fill w-10ch"></span></td></tr>
          <tr><th>Klasa / Sprawność</th><td><span class="fill w-24ch"></span></td></tr>
          <tr><th>Komplet armatury</th><td><span class="fill w-28ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
      </table>
      <p class="small">Dodatki kotłowni: pompa obiegowa <span class="fill w-12ch"></span>, pompa cyrkulacyjna <span class="fill w-12ch"></span>, zawór mieszający <span class="fill w-12ch"></span>, grupa bezpieczeństwa <span class="fill w-12ch"></span>, komin/spalinowy <span class="fill w-16ch"></span>.</p>

      <!-- 3.3 Fotowoltaika -->
      <h3>3.3. Fotowoltaika</h3>
      <table aria-label="Fotowoltaika" class="component">
        <tbody>
          <tr><th>Moduły (producent / model)</th><td><span class="fill w-42ch"></span></td></tr>
          <tr><th>Ilość [szt.]</th><td><span class="fill w-10ch"></span></td></tr>
          <tr><th>Moc instalacji [kWp]</th><td><span class="fill w-16ch"></span></td></tr>
          <tr><th>Inwerter (model / moc)</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Konstrukcja montażowa</th><td><span class="fill w-30ch"></span></td></tr>
          <tr><th>Zabezpieczenia AC/DC</th><td><span class="fill w-26ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
      </table>
      <p class="small">Okablowanie DC <span class="fill w-8ch"></span> m, AC <span class="fill w-8ch"></span> m, uziemienie <span class="fill w-10ch"></span>, monitoring <span class="fill w-12ch"></span>, typ dachu/pokrycia <span class="fill w-28ch"></span>.</p>

      <!-- 3.4 Ocieplenie -->
      <h3>3.4. Ocieplenie</h3>
      <table aria-label="Ocieplenie" class="component">
        <tbody>
          <tr><th>Materiał (styropian/wełna/PUR)</th><td><span class="fill w-34ch"></span></td></tr>
          <tr><th>Grubość [cm]</th><td><span class="fill w-10ch"></span></td></tr>
          <tr><th>λ</th><td><span class="fill w-10ch"></span></td></tr>
          <tr><th>Powierzchnia [m²]</th><td><span class="fill w-14ch"></span></td></tr>
          <tr><th>System/tynk</th><td><span class="fill w-24ch"></span></td></tr>
          <tr><th>Obróbki/Parapety</th><td><span class="fill w-24ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
      </table>

      <!-- 3.5 Stolarka i elementy dodatkowe -->
      <h3>3.5. Stolarka i elementy dodatkowe</h3>
      <table aria-label="Stolarka i dodatki" class="component">
        <tbody id="group-grzejnik">
          <tr><th colspan="2">Grzejnik / typ</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-rozdzielacz">
          <tr><th colspan="2">Rozdzielacz / obiegi</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-rury">
          <tr><th colspan="2">Rury / prowadzenie</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-okna">
          <tr><th colspan="2">Okna</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-drzwi">
          <tr><th colspan="2">Drzwi</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-garaz">
          <tr><th colspan="2">Bramy garażowe</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-rekuperacja">
          <tr><th colspan="2">Rekuperacja ścienna</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-klimatyzacja">
          <tr><th colspan="2">Klimatyzacja</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
        <tbody id="group-inne">
          <tr><th colspan="2">Inne (audyt, demontaż, utylizacja)</th></tr>
          <tr><th>Parametry</th><td><span class="fill w-36ch"></span></td></tr>
          <tr><th>Ilość</th><td><span class="fill w-8ch"></span></td></tr>
          <tr><th>Cena netto</th><td class="sum-netto"><span class="fill w-16ch"></span></td></tr>
          <tr><th>VAT</th><td class="sum-vat"><span class="fill w-8ch"></span></td></tr>
          <tr><th>Brutto</th><td class="sum-brutto"><span class="fill w-16ch"></span></td></tr>
        </tbody>
      </table>

      <h2>§4. Wynagrodzenie i warunki płatności</h2>
      <ol>
        <li>
          Wynagrodzenie łączone za przedmiot umowy (netto):
          <b><span id="sumNet" class="fill w-24ch"></span></b> zł;
          kwota VAT łącznie: <b><span id="sumVatAmt" class="fill w-16ch"></span></b> zł;
          stawka VAT (średnia ważona): <b><span id="sumVatPct" class="fill w-6ch"></span></b> %;
          wartość brutto: <b><span id="sumGross" class="fill w-24ch"></span></b> zł.
        </li>
        <li>Zaliczka: <span class="fill w-16ch"></span> zł, płatna do dnia: <span class="fill w-14ch"></span>, na rachunek: <span class="fill w-36ch"></span>.</li>
        <li>Harmonogram płatności (jeśli dotyczy): I etap <span class="fill w-8ch"></span>% do dnia <span class="fill w-12ch"></span>; II etap <span class="fill w-8ch"></span>% do dnia <span class="fill w-12ch"></span>; końcowa <span class="fill w-8ch"></span>% po odbiorze.</li>
        <li>Jeżeli Zamawiający korzysta z dofinansowania (np. „Czyste Powietrze”), strony uzgadniają, że: <span class="fill w-68ch"></span></li>
        <li>W przypadku opóźnienia w płatności Wykonawca może naliczyć odsetki ustawowe za opóźnienie oraz wstrzymać prace do czasu uregulowania należności.</li>
      </ol>

      <h2>§5. Terminy</h2>
      <ol>
        <li>Rozpoczęcie prac: <span class="fill w-18ch"></span>. Zakończenie: <span class="fill w-18ch"></span>.</li>
        <li>Terminy mogą ulec zmianie w przypadku: braku dostępu do frontu robót, nieprzewidzianych warunków technicznych, siły wyższej, opóźnień po stronie Zamawiającego, opóźnień dostaw niezawinionych przez Wykonawcę.</li>
      </ol>

      <h2>§6. Odbiór</h2>
      <ol>
        <li>Po zakończeniu prac sporządzony zostanie <b>Protokół odbioru</b> (Załącznik nr 2). Odbiór obejmuje sprawdzenie kompletności, zgodności i uruchomienie (jeśli dotyczy).</li>
        <li>Stwierdzone wady/usterki zostaną usunięte w terminie uzgodnionym w protokole.</li>
      </ol>

      <h2>§7. Gwarancja i rękojmia</h2>
      <ol>
        <li>Wykonawca udziela gwarancji na montaż na okres <span class="fill w-10ch"></span> miesięcy od daty odbioru. Gwarancja producenta na urządzenia zgodnie z kartą gwarancyjną.</li>
        <li>Wady należy zgłaszać e-mailowo na adres: <b>biuro@arkoncentrum.pl</b> lub telefonicznie: <b>511 514 818</b>, opisując objawy, datę i numer umowy.</li>
        <li>Wady usuwane będą w rozsądnym terminie, z uwzględnieniem dostępności części. Gwarancja nie obejmuje: uszkodzeń mechanicznych, szkód z winy użytkownika, braku przeglądów i eksploatacji niezgodnej z instrukcją, przepięć, zalania, szkód losowych.</li>
        <li>Uprawnienia z gwarancji nie wyłączają uprawnień z rękojmi przysługujących konsumentowi na podstawie Kodeksu cywilnego.</li>
      </ol>

      <h2>§8. Reklamacje</h2>
      <p>Reklamacje Zamawiający składa na piśmie lub e-mailem na adres Wykonawcy. Wykonawca potwierdzi przyjęcie reklamacji i udzieli odpowiedzi w terminie <span class="fill w-8ch"></span> dni roboczych.</p>

      <h2>§9. Prawo odstąpienia</h2>
      <ol>
        <li>Jeśli Zamawiający jest konsumentem i umowa zawarta została poza lokalem lub na odległość, przysługuje mu prawo odstąpienia w terminie 14 dni zgodnie z ustawą o prawach konsumenta.</li>
        <li>Jeżeli na wyraźną prośbę Zamawiającego rozpoczęto świadczenie przed upływem 14 dni, Zamawiający ponosi koszty wykonanych czynności do chwili odstąpienia.</li>
        <li>Oświadczenie o odstąpieniu należy złożyć w formie pisemnej na adres siedziby Wykonawcy lub e-mailem.</li>
      </ol>

      <h2>§10. Obowiązki Zamawiającego</h2>
      <ol>
        <li>Zapewnienie dostępu do miejsca montażu, zasilania elektrycznego, mediów oraz uzyskanie wymaganych zgód (w tym wspólnoty/spółdzielni).</li>
        <li>Przygotowanie pomieszczeń i zabezpieczenie mienia; wskazanie miejsc prowadzenia tras i posadowienia urządzeń.</li>
      </ol>

      <h2>§11. Kary umowne</h2>
      <p>Za zwłokę z winy Wykonawcy w wykonaniu przedmiotu umowy kary wynoszą <span class="fill w-8ch"></span>% wynagrodzenia brutto za każdy dzień zwłoki, nie więcej niż <span class="fill w-8ch"></span>%. Analogiczne kary mogą dotyczyć zwłoki Zamawiającego w zapewnieniu frontu robót/płatnościach.</p>

      <h2>§12. Siła wyższa</h2>
      <p>Strony nie ponoszą odpowiedzialności za niewykonanie umowy w zakresie spowodowanym wystąpieniem siły wyższej (w szczególności: klęski żywiołowe, wojna, epidemie, przerwy w dostawach, akty władzy publicznej). Terminy ulegają odpowiedniemu przedłużeniu.</p>

      <h2>§13. Ochrona danych (RODO)</h2>
      <div class="small">
        Administratorem danych jest PW ARKON Czesław i Krystyna Sobaniak sp.j., ul. Fabryczna 12C, 59-170 Przemków, e-mail: biuro@arkoncentrum.pl, tel. 511 514 818.  
        Dane przetwarzane są w celu zawarcia i wykonania umowy (art. 6 ust. 1 lit. b RODO), wypełnienia obowiązków prawnych (lit. c) oraz prawnie uzasadnionych interesów administratora (lit. f), w szczególności dochodzenia roszczeń i obsługi reklamacji.  
        Dane mogą być powierzone podmiotom świadczącym usługi na rzecz Administratora (np. serwis, transport, księgowość, hosting).  
        Dane będą przechowywane przez okres obowiązywania umowy, a następnie do upływu terminów przedawnienia roszczeń oraz wynikających z przepisów podatkowych/rachunkowych.  
        Osobie, której dane dotyczą, przysługuje prawo dostępu do danych, ich sprostowania, ograniczenia przetwarzania, przenoszenia danych, sprzeciwu, a w zakresie zgody – prawo jej cofnięcia. Przysługuje też prawo wniesienia skargi do Prezesa UODO.  
        Podanie danych jest dobrowolne, lecz niezbędne do zawarcia i realizacji umowy.
      </div>

      <h2>§14. Postanowienia końcowe</h2>
      <ol>
        <li>W sprawach nieuregulowanych stosuje się przepisy Kodeksu cywilnego i właściwe przepisy szczególne.</li>
        <li>Zmiany umowy wymagają formy pisemnej pod rygorem nieważności.</li>
        <li>Spory będzie rozstrzygał sąd powszechny właściwy według przepisów – dla konsumenta zgodnie z właściwością ogólną; w pozostałych przypadkach sąd właściwy dla siedziby Wykonawcy.</li>
        <li>Umowę sporządzono w <span class="fill w-8ch"></span> jednobrzmiących egzemplarzach, po jednym dla każdej ze stron.</li>
      </ol>

    <div class="signRow">
      <div class="sign">
        ..................................................<br>
        <span class="small">Podpis Zamawiającego</span>
      </div>
      <div class="sign">
        ..................................................<br>
        <span class="small">Podpis Wykonawcy – PW ARKON</span>
      </div>
    </div>

<table class="contract-table" border="1" cellpadding="6">
  <thead>
    <tr><th>Kategoria</th><th>Pozycja / opis</th><th>Ilość</th><th>Cena netto</th><th>Wartość netto</th></tr>
  </thead>
  <tbody id="contractItems">
    <tr><td colspan="5" class="contract-empty">Brak – wypełnij w „Komponenty do umowy”.</td></tr>
  </tbody>
  <tfoot>
    <tr><td colspan="4" class="right-align"><b>Suma netto</b></td><td id="sumNetCell">0</td></tr>
    <tr><td colspan="4" class="right-align">VAT <span id="vatPct">8</span>%</td><td id="vatVal">0</td></tr>
    <tr><td colspan="4" class="right-align"><b>Suma brutto</b></td><td id="sumGrossCell">0</td></tr>
  </tfoot>
</table>

<p>
  Zamawiający: <span id="clientName">—</span><br>
  Adres montażu: <span id="clientAddr">—</span>
</p>

<script>
(function(){
  const INT = new Intl.NumberFormat('pl-PL',{maximumFractionDigits:0});
  const LS_KEY = 'arkon_contract_items_v1';
  let raw = localStorage.getItem(LS_KEY);
  if(!raw){ console.warn('Brak danych kontraktu'); return; }
  let d; try{ d=JSON.parse(raw) }catch(e){ console.warn('Błędny JSON'); return; }

  document.getElementById('clientName').textContent = d.client?.name || '—';
  document.getElementById('clientAddr').textContent = d.client?.addr || '—';

  const tb = document.getElementById('contractItems');
  tb.innerHTML = '';
  (d.items||[]).forEach(it=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `
      <td>${it.cat||''}</td>
      <td>${it.name||''}</td>
      <td style="text-align:right">${INT.format(it.qty||0)}</td>
      <td style="text-align:right">${INT.format(it.price||0)}</td>
      <td style="text-align:right">${INT.format(it.net||0)}</td>`;
    tb.appendChild(tr);
  });

  const vat = Number(d.vat||0.08);
  const sumNet = Number(d.sumNet||0);
  const vatVal = Math.round(sumNet*vat);
  const sumGross = sumNet + vatVal;
  document.getElementById('sumNetCell').textContent   = INT.format(sumNet);
  document.getElementById('vatPct').textContent       = Math.round(vat*100);
  document.getElementById('vatVal').textContent       = INT.format(vatVal);
  document.getElementById('sumGrossCell').textContent = INT.format(sumGross);
})();
</script>
  <!-- Stopka drukowana -->
  <div class="print-footer" aria-hidden="true">
    <div class="line">
      <span>PW ARKON • Umowa</span>
    </div>
  </div>
</div>

  <!-- Stopka drukowana -->
  <div class="print-footer" aria-hidden="true">
  </div>

<script>
(function(){
  // znacznik czasu
  const now = new Date();
  document.getElementById('now').textContent = now.toLocaleString('pl-PL');
  document.getElementById('printDate').textContent = now.toLocaleDateString('pl-PL');

  // przełącznik edycji
  const doc = document.getElementById('doc');
  document.getElementById('btnToggleEdit').addEventListener('click', ()=>{
    const on = doc.getAttribute('contenteditable') === 'true';
    doc.setAttribute('contenteditable', on ? 'false' : 'true');
  });

  // parametry URL
  function params(){ try{ return Object.fromEntries(new URL(location.href).searchParams.entries()); }catch{ return {}; } }

  // klienci z localStorage
  function loadClients(){
    try{ return JSON.parse(localStorage.getItem('arkon_clients_v2')||'[]'); }catch{ return []; }
  }

  // wstawianie danych do pól data-bind
  function setDot(selector, value){
    document.querySelectorAll('[data-bind="'+selector+'"]').forEach(el=>{
      if(value && String(value).trim()){ el.textContent = String(value); }
    });
  }

  // merge z klientem
  const p = params();
  if(p.clientId){
    const clients = loadClients();
    const c = clients.find(x=>x.id===p.clientId);
    if(c){
      setDot('client.name',  c.name||'');
      setDot('client.address', c.address||'');
      setDot('client.email', c.email||'');
      setDot('client.phone', c.phone||'');
      if(p.no)   setDot('contract.no', p.no);
      if(p.date) setDot('contract.date', p.date);
      if(p.city) setDot('city', p.city);
      document.getElementById('mergeState').textContent = 'OK';
    }else{
      document.getElementById('mergeState').textContent = 'brak klienta';
    }
  }else{
    document.getElementById('mergeState').textContent = 'brak clientId';
  }

  /* ====== SUMOWANIE §3 → §4 z VAT ====== */
  const fmt2 = new Intl.NumberFormat('pl-PL', {minimumFractionDigits:2, maximumFractionDigits:2});
  function parseMoney(s){
    if(!s) return NaN;
    s = String(s).replace(/\s/g,'').replace(/zł|PLN/ig,'');
    const lastComma = s.lastIndexOf(','), lastDot = s.lastIndexOf('.');
    if(lastComma>lastDot){ s = s.replace(/\./g,'').replace(',','.'); } else { s = s.replace(/,/g,''); }
    const n = parseFloat(s);
    return isFinite(n)? n : NaN;
  }
  function getText(el){ return (el?.textContent||'').trim(); }
  function setText(el, val){ if(el) el.textContent = val; }

  function ensureVatOut(el){
    if(!el) return null;
    const host = el.classList?.contains('fill') ? el.parentElement : el;
    if(!host) return null;
    let out = host.querySelector('.vat-amt-out');
    if(!out){
      out = document.createElement('span');
      out.className = 'vat-amt-out';
      host.appendChild(out);
    }
    return out;
  }

  function recalc(){
    const tables = document.querySelectorAll('table.component');
    let sumNet = 0, sumGross = 0, sumVatAmt = 0, vatBase = 0, vatAmount = 0;

    tables.forEach(tb=>{
      const nettoWrap  = tb.querySelector('.sum-netto .fill, .sum-netto');
      const vatWrap    = tb.querySelector('.sum-vat .fill, .sum-vat');
      const bruttoWrap = tb.querySelector('.sum-brutto .fill, .sum-brutto');

      if(!nettoWrap && !vatWrap && !bruttoWrap) return;

      let nettoEl  = nettoWrap?.classList?.contains('fill')  ? nettoWrap  : tb.querySelector('.sum-netto');
      let vatEl    = vatWrap?.classList?.contains('fill')    ? vatWrap    : tb.querySelector('.sum-vat');
      let bruttoEl = bruttoWrap?.classList?.contains('fill') ? bruttoWrap : tb.querySelector('.sum-brutto');

      let netto  = parseMoney(getText(nettoEl));
      let vatPct = parseMoney(getText(vatEl));
      let brutto = parseMoney(getText(bruttoEl));

      // wyprowadź brakujące wartości
      if(isNaN(vatPct) && !isNaN(netto) && !isNaN(brutto) && netto>0){
        vatPct = (brutto/netto - 1) * 100;
        setText(vatEl, fmt2.format(vatPct));
      }
      if(isNaN(brutto) && !isNaN(netto) && !isNaN(vatPct)){
        brutto = netto * (1 + vatPct/100);
        setText(bruttoEl, fmt2.format(brutto));
      }
      if(isNaN(netto) && !isNaN(brutto) && !isNaN(vatPct) && vatPct!==0){
        netto = brutto / (1 + vatPct/100);
        setText(nettoEl, fmt2.format(netto));
      }

      // kwota VAT komponentu
      let vatAmt = NaN;
      if(!isNaN(netto) && !isNaN(vatPct)){ vatAmt = netto * (vatPct/100); }
      if(!isNaN(netto) && !isNaN(brutto)){ vatAmt = brutto - netto; }

      // pokaż „(kwota: X,XX zł)” przy polu VAT
      const vatOut = ensureVatOut(vatEl);
      if(vatOut && !isNaN(vatAmt) && vatAmt>=0){
        vatOut.textContent = ` (kwota: ${fmt2.format(vatAmt)} zł)`;
      }else if(vatOut){
        vatOut.textContent = '';
      }

      // sumowanie
      if(!isNaN(netto))  sumNet   += netto;
      if(!isNaN(brutto)) sumGross += brutto;
      if(!isNaN(vatAmt)) sumVatAmt += vatAmt;
      if(!isNaN(netto) && !isNaN(brutto)){
        vatBase   += netto;
        vatAmount += (brutto - netto);
      }
    });

    const vatPctWeighted = vatBase>0 ? (vatAmount/vatBase*100) : 0;

    // wpisy do §4
    setText(document.getElementById('sumNet'),    sumNet>0 ? fmt2.format(sumNet) : '');
    setText(document.getElementById('sumGross'),  sumGross>0 ? fmt2.format(sumGross) : '');
    setText(document.getElementById('sumVatAmt'), sumVatAmt>0 ? fmt2.format(sumVatAmt) : '');
    setText(document.getElementById('sumVatPct'), (isFinite(vatPctWeighted) && vatPctWeighted>0) ? fmt2.format(vatPctWeighted) : '');
  }

  document.getElementById('btnRecalc').addEventListener('click', recalc);
  let t; document.getElementById('doc').addEventListener('input', ()=>{ clearTimeout(t); t = setTimeout(recalc, 350); });
  recalc();
})();
</script>
</body>
</html>
