<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Komponenty ‚Ä¢ Pompy ciep≈Ça ‚Äî katalog + konfigurator + koszyk</title>
<meta name="description" content="ARKON: katalog pomp ciep≈Ça (Midea, Panasonic, Galmet, ‚Ä¶), szybki i zaawansowany dob√≥r mocy, konfiguracja zestawu, koszyk, auto-zapis do umowy." />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%230f1533'/%3E%3Ctext x='50%25' y='56%25' text-anchor='middle' font-size='40' fill='%234cc9f0' font-family='Segoe UI,Arial,sans-serif'%3EP%3C/text%3E%3C/svg%3E">

<style>
  :root{
    --bg:#0b1020; --grad1:#0a0f1e; --grad2:#0c1230;
    --p1:#121a34; --p2:#172142; --ink:#e8edff; --muted:#aeb8da;
    --accent:#4cc9f0; --ok:#2fbf71; --warn:#ffb84d; --bad:#ff6b6b;
    --grid:#243059; --card:#0f1533; --line:#1c2750; --chip:#0d1530;
    --focus:#82c4ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    background:linear-gradient(180deg,var(--grad1),var(--grad2) 60%,var(--grad1));
    font:15px/1.55 system-ui,Segoe UI,Roboto,Arial
  }

  /* header / nav */
  header{padding:16px;border-bottom:1px solid var(--line);background:#0e1534;position:sticky;top:0;z-index:10}
  header h1{margin:0;font-size:22px}
  header .muted{color:var(--muted);font-size:13px;margin-top:4px}
  #site-nav{background:#121a44;border-bottom:1px solid var(--line)}
  #site-nav .nav-wrap{max-width:1500px;margin:auto;padding:10px 16px;display:flex;gap:8px;flex-wrap:wrap}
  #site-nav a{color:#cfe1ff;text-decoration:none;padding:8px 12px;border-radius:999px;border:1px solid #2a3a75}
  #site-nav a:hover{background:#1a2758}

  /* layout */
  .wrap{max-width:1500px;margin:auto;padding:16px}
  .grid{display:grid;gap:14px}
  @media(min-width:1200px){ .cols-2{grid-template-columns:1.6fr 1.4fr} }

  /* cards / buttons / form */
  .card{background:linear-gradient(180deg,var(--p1),var(--p2));border:1px solid var(--line);border-radius:14px;padding:14px;box-shadow:0 8px 28px #0005}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .spaced{justify-content:space-between}
  .right{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
  .btn{background:#233261;border:1px solid #3a4ca3;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn.ghost{background:transparent;border-style:dashed}
  .btn.ok{background:#194d34;border-color:#2f9762}
  .btn.warn{background:#3a2a19;border-color:#9d7a33}
  .btn.bad{background:#3a1f2a;border-color:#7b3341}
  .btn.tiny{font-size:12px;padding:6px 8px;border-radius:8px}
  .muted{color:var(--muted);font-size:13px}
  .small{font-size:12px;color:var(--muted)}

  label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
  input,select,textarea{background:#0d1530;border:1px solid #28356c;border-radius:10px;padding:8px 10px;color:#e8edff;font:inherit}
  input:focus,select:focus,textarea:focus{border-color:#3e61cc;box-shadow:0 0 0 3px #3e61cc33;outline:0}
  input.num{text-align:right}
  .w70{width:70px}.w90{width:90px}.w110{width:110px}.w140{width:140px}.w180{width:180px}.minw220{min-width:220px}
  .pill{display:inline-block;background:#0d1530;border:1px dashed #2b3a77;border-radius:999px;padding:6px 10px;font-size:13px;color:#aeb8da}

  /* chips / filters */
  .chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
  .chip{user-select:none;border:1px solid #3a4ca3;border-radius:999px;padding:6px 10px;font-size:12px;cursor:pointer;background:var(--chip)}
  .chip.active{background:#233261}
  .chip .x{opacity:.7;margin-left:6px}

  /* tables */
  table{width:100%;border-collapse:separate;border-spacing:0}
  th,td{padding:10px;border-bottom:1px solid var(--grid);vertical-align:top;text-align:left}
  th{font-size:12px;color:#aeb8da;position:sticky;top:0;background:#151d46;z-index:1}
  td.num,th.num{text-align:right}
  tbody tr:hover{background:#0d153033}
  .scroll{overflow:auto;max-height:70vh}

  /* sections */
  .sep{height:1px;background:#243059;margin:10px 0}
  .okline{padding:8px;border-radius:10px;background:#0f2a22;border:1px solid #155a41;color:#b4ffdd}
  .warnline{padding:8px;border-radius:10px;background:#3a2a19;border:1px dashed #9d7a33;color:#ffdda1}
  .hide{display:none}
  .summary-value{font-weight:800;font-size:18px}
  .price-preview{font-weight:800;font-size:18px}

  /* footer */
  footer{max-width:1500px;margin:16px auto 32px;color:#a9b6e6}
  footer .inner{display:flex;gap:16px;align-items:center;padding:12px 16px;border:1px solid var(--line);border-radius:12px;background:linear-gradient(180deg,#0e1740,#0f1a4a)}
  footer .f-logo{width:40px;height:40px;border-radius:10px;background:#0e1538;display:grid;place-items:center;overflow:hidden}
  footer .f-logo img{width:100%;height:100%;object-fit:cover}

  /* print */
  @media print{
    @page{ size:A4 landscape; margin:10mm }
    html,body{-webkit-print-color-adjust:exact; print-color-adjust:exact; background:#fff}
    header,#site-nav,.no-print{display:none !important}
    .wrap{max-width:none;margin:0;padding:0}
    .card{box-shadow:none;border:1px solid #888;background:#fff}
    th{background:#eee;color:#000}
    .muted,.small{color:#000}
  }
</style>
</head>
<body>

<!-- global nav (≈Çadowana z pliku nav.html; je≈õli go nie ma ‚Äì pokazuje siƒô fallback) -->
<nav id="site-nav" aria-label="Nawigacja serwisu">
  <div class="nav-wrap">
    <a href="index.html">Pulpit</a>
    <a href="kalkulator.html">Kalkulator</a>
    <a href="komponenty.html">Komponenty ‚Ä¢ Hub</a>
    <a href="komponenty-pompy.html" aria-current="page">Pompy</a>
    <a href="komponenty-piece.html">Piece</a>
    <a href="komponenty-fotowoltaika.html">Fotowoltaika</a>
    <a href="komponenty-ocieplenie.html">Ocieplenie</a>
    <a href="komponenty-stolarka.html">Stolarka</a>
    <a href="komponenty-hydraulika.html">Hydraulika</a>
    <a href="umowy.html">Umowy</a>
    <a href="upload.html">Przesy≈Ç plik√≥w</a>
    <a href="kalendarz-montaze.html">Kalendarz monta≈ºy</a>
    <a href="klienci.html">Klienci</a>
    <a href="dokumenty.html">Dokumenty</a>
  </div>
</nav>

<header class="no-print">
  <h1>Komponenty ‚Ä¢ Pompy ciep≈Ça ‚Äî katalog + konfigurator</h1>
  <div class="muted">
    Katalog modeli (Midea, Panasonic, Galmet, ‚Ä¶) z filtrami i dopasowaniem mocy.
    Po prawej konfigurator zestawu i koszyk. <b>Stan zapisywany lokalnie</b> i
    <b>automatycznie wysy≈Çany do umowy</b> (naj≈õwie≈ºszy szkic).
  </div>
</header>

<main class="wrap grid cols-2">

  <!-- LEWA KOLUMNA ‚Äî KATALOG + FILTRY -->
  <section class="grid">
    <!-- Filtry i wyszukiwarka -->
    <div class="card">
      <div class="row">
        <input id="q" class="minw220" placeholder="üîé Szukaj: marka, model, czynnik, tag‚Ä¶ lub moc (np. '10 kW', '8-12', '>=12')" aria-label="Szukaj" />
        <select id="fBrand" title="Marka">
          <option value="">Marka (wszystkie)</option>
          <!-- wype≈Çnia JS -->
        </select>
        <select id="fType" title="Typ">
          <option value="">Typ</option>
          <option>monoblok</option>
          <option>split</option>
          <option>all-in-one</option>
        </select>
        <select id="fRef" title="Czynnik">
          <option value="">Czynnik</option>
          <option>R32</option>
          <option>R290</option>
        </select>
        <select id="fPhase" title="Fazy">
          <option value="">Fazy</option>
          <option>1F</option>
          <option>3F</option>
        </select>
        <select id="sort" title="Sortowanie">
          <option value="brand.asc">Marka ‚Üë</option>
          <option value="brand.desc">Marka ‚Üì</option>
          <option value="p.asc">Moc ‚Üë</option>
          <option value="p.desc">Moc ‚Üì</option>
          <option value="price.asc">Cena urzƒÖdzenia ‚Üë</option>
          <option value="price.desc">Cena urzƒÖdzenia ‚Üì</option>
        </select>
        <button id="btnClear" class="btn ghost" type="button">Wyczy≈õƒá</button>
      </div>
      <div class="row">
        <div class="chips" id="chips" aria-label="Szybkie tagi">
          <!-- wype≈Çnia JS -->
        </div>
        <label class="small" style="margin-left:auto">
          <input type="checkbox" id="tagsAll"> dopasuj <b>wszystkie</b> tagi
        </label>
      </div>
      <div id="recQuick" class="okline mt6 hide" role="status" aria-live="polite"></div>
      <div class="row">
        <span class="pill">≈ÅƒÖcznie: <b id="cntAll">0</b></span>
        <span class="pill">Widocznych: <b id="cntVis">0</b></span>
      </div>
    </div>

    <!-- Tabela katalogu -->
    <div class="card scroll">
      <table aria-label="Katalog pomp">
        <thead>
          <tr>
            <th>Akcje</th>
            <th>Marka / Model</th>
            <th>Typ</th>
            <th class="num">Moc A7 [kW]</th>
            <th class="num">SCOP</th>
            <th>Czynnik</th>
            <th>Fazy</th>
            <th>Ha≈Ças [dB(A)]</th>
            <th>Uwagi</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <!-- wype≈Çnia JS -->
        </tbody>
      </table>
      <div class="small mt6">Uwaga: ceny urzƒÖdze≈Ñ sƒÖ u≈ºyte w kalkulacji zestawu ‚Äî nie pokazujemy ich wprost w tabeli.</div>
    </div>
  </section>

  <!-- PRAWA KOLUMNA ‚Äî KONFIGURATOR + KOSZYK + KLIENT -->
  <aside class="grid">
    <!-- Konfigurator -->
    <div class="card">
      <div class="row spaced">
        <b>Konfigurator zestawu</b>
        <div class="right">
          <button id="btnAddPack" class="btn ok" type="button">+ Dodaj ZESTAW</button>
          <button id="btnAddHp" class="btn warn" type="button">+ Sama pompa</button>
        </div>
      </div>

      <!-- wybory -->
      <div class="row mt6">
        <div>
          <label class="small">Model pompy</label>
          <select id="selHp" class="w180" aria-label="Model pompy"></select>
        </div>
        <div>
          <label class="small">Bufor [l]</label>
          <select id="selBufor" class="w110" aria-label="Bufor [l]"></select>
        </div>
        <div>
          <label class="small">Typ zasobnika CWU</label>
          <select id="selCwuType" class="w140" title="Sugerowany wariant">
            <option value="single" selected>pojedyncza wƒô≈ºownica</option>
            <option value="dual">dwuwƒô≈ºownicowy</option>
          </select>
        </div>
        <div>
          <label class="small">Zasobnik CWU [l]</label>
          <select id="selCwu" class="w110"></select>
        </div>
        <div>
          <label class="small">Cel u≈ºycia CWU</label>
          <select id="selCwuUse" class="w180" title="Sugeruje pojemno≈õƒá">
            <option value="2-3">2‚Äì3 osoby (200‚Äì250 l)</option>
            <option value="4-5" selected>4‚Äì5 os√≥b (250‚Äì300 l)</option>
            <option value="6+">6+ os√≥b (300 l +)</option>
          </select>
        </div>
        <div>
          <label class="small">VAT</label>
          <select id="selVat" class="w90" title="Stawka VAT">
            <option value="0.08" selected>8%</option>
            <option value="0.23">23%</option>
            <option value="0">0%</option>
          </select>
        </div>
      </div>

      <!-- dodatki -->
      <div class="row mt6">
        <div>
          <label class="small">Zaw√≥r 3-drogowy</label>
          <select id="selV3d" class="w140"><option value="0">w zestawie</option><option value="450">+450</option></select>
        </div>
        <div>
          <label class="small">Grupa bezpiecze≈Ñstwa</label>
          <select id="selSafety" class="w140"><option value="0">w zestawie</option><option value="390">+390</option></select>
        </div>
        <div>
          <label class="small">Hydraulika (rozdzielacze)</label>
          <select id="selHydro" class="w180">
            <option value="0">podstawowa</option>
            <option value="1800">+1 obieg (1800)</option>
            <option value="3200">dwa obiegi (3200)</option>
          </select>
        </div>
        <div>
          <label class="small">Glikol (monoblok)</label>
          <select id="selGlycol" class="w140"><option value="0">nie</option><option value="600">30 l (600)</option><option value="900">50 l (900)</option></select>
        </div>
        <div>
          <label class="small">Grzejniki ‚Äî ilo≈õƒá [szt.]</label>
          <input id="inpRads" class="w110 num" inputmode="numeric" min="0" step="1" value="0" placeholder="0" />
        </div>
      </div>

      <!-- Dob√≥r mocy ‚Äî szybki -->
      <div class="sep"></div>
      <b>Dob√≥r mocy ‚Äî wariant szybki</b>
      <div class="row mt6">
        <div>
          <label class="small">Powierzchnia [m¬≤]</label>
          <input id="inpArea" class="w110 num" type="number" min="0" step="1" value="0" placeholder="np. 120" />
        </div>
        <div>
          <label class="small">Straty ciep≈Ça [W/m¬≤]</label>
          <select id="selWperm2" class="w180" title="Standard budynku">
            <option value="25">Nowy pasywny ‚Äî 25</option>
            <option value="35">Nowy / NZEB ‚Äî 35</option>
            <option value="45">Nowszy / dobra izolacja ‚Äî 45</option>
            <option value="50" selected>Modernizacja ‚Äî 50</option>
            <option value="60">Starszy ‚Äî 60</option>
            <option value="70">Bardzo stary ‚Äî 70</option>
            <option value="85">Stary nieocieplony ‚Äî 85</option>
            <option value="100">S≈Çabo ocieplony ‚Äî 100</option>
            <option value="115">Bardzo s≈Çabo ‚Äî 115</option>
            <option value="129">Ekstremalnie s≈Çabo ‚Äî 129</option>
          </select>
        </div>
        <div>
          <label class="small">Proponowana moc [kW]</label>
          <input id="outHeatKw" class="w110" type="text" value="0.00" readonly aria-live="polite" />
          <div class="small muted">Liczenie: m¬≤ √ó W/m¬≤ √∑ 1000 √ó 1.10 (margines 10%).</div>
        </div>
      </div>
      <div id="recQuickFilter" class="okline mt6 hide" role="status" aria-live="polite"></div>

      <!-- Dob√≥r mocy ‚Äî zaawansowany -->
      <div class="sep"></div>
      <b>Dob√≥r mocy ‚Äî wariant zaawansowany</b>
      <div class="row mt6">
        <div>
          <label class="small">Standard (podpowied≈∫)</label>
          <select id="selStd" class="w180">
            <option value="35">Nowy / NZEB (~35 W/m¬≤)</option>
            <option value="50" selected>Modernizacja (~50 W/m¬≤)</option>
            <option value="80">Stary nieocieplony (~80 W/m¬≤)</option>
          </select>
        </div>
        <div>
          <label class="small">Powierzchnia [m¬≤]</label>
          <input id="areaAdv" class="w110 num" type="number" min="30" step="1" placeholder="np. 120" />
        </div>
        <div>
          <label class="small">Straty [W/m¬≤] (do 129)</label>
          <input id="lossWm2" class="w110 num" type="number" min="10" max="129" step="1" value="70" />
        </div>
      </div>
      <div id="lossWarn" class="warnline mt6 hide">&gt; 140 W/m¬≤ ‚Äî niezalecane</div>

      <div class="row mt6" style="gap:12px;flex-wrap:wrap">
        <div class="pill">ObciƒÖ≈ºenie projektowe: <b id="heatLoad">‚Äî</b></div>
        <div class="pill">Zapas 15%: <b id="heatTarget">‚Äî</b></div>
        <div class="pill">Pow. pokrywana wybranƒÖ pompƒÖ: <b id="areaByHp">‚Äî</b></div>
      </div>
      <div id="areaHint" class="small muted mt6"></div>
      <div id="recSummary" class="okline mt6 hide"></div>
      <div id="typeHint" class="okline mt6 hide"></div>

      <!-- PodglƒÖd ceny proporcjonalnej -->
      <div class="sep"></div>
      <div class="row">
        <div style="flex:1 1 320px">
          <div class="muted">Cena zestawu (netto) wg modelu proporcjonalnego</div>
          <div id="pricePreview" class="price-preview">‚Äî</div>
          <div id="typeHint_inline" class="okline mt6 hide"></div>
        </div>
        <div style="min-width:240px">
          <label class="small">Prowizja handlowca</label>
          <div class="row">
            <input id="provPct" type="number" min="0" step="0.1" placeholder="%" class="w90" aria-label="Prowizja %">
            <input id="provAbs" type="number" min="0" step="1" placeholder="PLN" class="w140" aria-label="Prowizja PLN">
          </div>
          <div class="small muted">Mo≈ºesz wpisaƒá % i/lub PLN (sumujƒÖ siƒô).</div>
        </div>
      </div>
    </div>

    <!-- Must-have / sk≈Çad -->
    <div class="card">
      <b>Sk≈Çad zestawu (must-have)</b>
      <div id="mustHave" class="muted mt6">Wybierz pompƒô, bufor i zasobnik ‚Äî poka≈ºƒô proponowany sk≈Çad.</div>
    </div>

    <!-- Koszyk -->
    <div class="card">
      <b>Koszyk</b>
      <table id="basket" class="mt6" aria-label="Koszyk">
        <thead><tr>
          <th>Pozycja</th>
          <th style="width:100px">Ilo≈õƒá</th>
          <th class="num" style="width:160px">Cena [PLN]</th>
          <th style="width:90px"></th>
        </tr></thead>
        <tbody>
          <!-- wype≈Çnia JS -->
        </tbody>
      </table>
      <div class="sep"></div>
      <div class="row">
        <div><span class="muted">Suma netto</span><div id="sumNet" class="summary-value">0,00 PLN</div></div>
        <div><span class="muted">Prowizja</span><div id="sumProv" class="summary-value">0,00 PLN</div></div>
        <div><span class="muted">Brutto (z VAT)</span><div id="sumGross" class="summary-value">0,00 PLN</div></div>
        <div class="right">
          <button id="btnCopy" class="btn ghost" type="button">Kopiuj ofertƒô</button>
          <button id="btnPrint" class="btn ghost" type="button">Drukuj / PDF</button>
          <button id="btnXlsx" class="btn ghost" type="button">Eksport XLSX</button>
          <button id="btnExportJson" class="btn ghost" type="button">Eksport JSON</button>
          <button id="btnImportJson" class="btn ghost" type="button">Import JSON</button>
        </div>
      </div>
      <div class="small muted mt6">
        <b>Auto-zapis do umowy:</b> ka≈ºdy dodany/zmieniony zestaw zapisuje siƒô do <code>localStorage</code>
        jako <i>contract_draft_v3</i>. Plik <code>umowa2.html</code> pobiera ostatni szkic automatycznie.
      </div>
    </div>

    <!-- Baza klient√≥w / wysy≈Çka do umowy -->
    <div class="card">
      <b>Dane klienta</b>
      <div class="row mt6">
        <div>
          <label class="small">Imiƒô i nazwisko / Firma</label>
          <input id="clName" class="w180" placeholder="np. Jan Kowalski" autocomplete="name">
        </div>
        <div>
          <label class="small">E-mail</label>
          <input id="clEmail" class="w180" type="email" placeholder="np. jan@firma.pl" autocomplete="email">
        </div>
        <div>
          <label class="small">Telefon</label>
          <input id="clPhone" class="w140" placeholder="np. 600123123" autocomplete="tel">
        </div>
        <div>
          <label class="small">NIP (opcjonalnie)</label>
          <input id="clNip" class="w140" placeholder="NIP" inputmode="numeric">
        </div>
        <div style="flex:1 1 320px">
          <label class="small">Adres (ulica, miasto)</label>
          <input id="clAddr" placeholder="np. ul. Przyk≈Çadowa 1, 59-170 Przemk√≥w" autocomplete="street-address">
        </div>
      </div>

      <div class="row mt6">
        <button id="btnSaveClient" class="btn ok" type="button">Zapisz klienta do bazy</button>
        <select id="selClient" class="w180"><option value="">‚Äî wybierz z bazy ‚Äî</option></select>
        <button id="btnLoadClient" class="btn ghost" type="button">Wczytaj</button>

        <!-- Ten przycisk zostaje jako manualny fallback; JS i tak bƒôdzie auto-pushowaƒá szkic -->
        <button id="btnToContract" class="btn" type="button" title="Wymu≈õ aktualizacjƒô szkicu umowy">Wy≈õlij do umowy</button>
        <button id="btnMailTo" class="btn ghost" type="button">Wy≈õlij ofertƒô e-mailem</button>
      </div>

      <div class="small muted mt6">
        Dane klient√≥w i szkice um√≥w sƒÖ przechowywane lokalnie w przeglƒÖdarce. Szkic jest
        automatycznie aktualizowany przy ka≈ºdej zmianie w koszyku/konfiguratorze.
      </div>
    </div>
  </aside>
</main>

<footer class="no-print">
  <div class="inner">
    <div class="f-logo" aria-hidden="true">
      <img alt="ARKON" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAAB49Y7QAAAACXBIWXMAAAsSAAALEgHS3X78AAAAPElEQVR4nO3OsQkAQAwEwZL//2aWQwE0QeB0xwqG8xgk7u+FAAD8Jr8wHh8rCkZgO1FQqf8mF3dwcHBwcHBwcHBweE9QmU+Qp6wq7mPAAAAAElFTkSuQmCC">
    </div>
    <div>
      <b>ARKON ‚Äì Przedsiƒôbiorstwo Wielobran≈ºowe</b><br>
      59-170 Przemk√≥w ‚Ä¢ ul. Fabryczna 12 C ‚Ä¢ NIP: 5020038830 ‚Ä¢ KRS: 0000255361 ‚Ä¢ tel. 76 831 90 30 ‚Ä¢ e-mail: biuro@arkon.com.pl
    </div>
  </div>
</footer>

<!-- NAV: automatyczne wstrzykniƒôcie z nav.html (je≈õli plik istnieje w repo/public) -->
<script>
(function () {
  const mount = document.getElementById('site-nav');
  if (!mount) return;
  fetch('nav.html', { cache: 'no-cache' })
    .then(r => r.ok ? r.text() : Promise.reject())
    .then(html => {
      const wrap = document.createElement('div');
      wrap.innerHTML = html.trim();
      const nav = wrap.firstElementChild;
      if (!nav) return;
      // pod≈õwietlenie aktywnej strony
      const here = location.pathname.split('/').pop() || 'index.html';
      nav.querySelectorAll('a').forEach(a => {
        const href = a.getAttribute('href');
        if (href === here) a.style.outline = '2px solid var(--accent)';
      });
      mount.innerHTML = '';
      mount.appendChild(nav);
    })
    .catch(() => { /* fallback z <nav> ju≈º jest */ });
})();
</script>

<!-- G≈Å√ìWNY SKRYPT Z LOGIKƒÑ -->
<script src="pompy.js" defer></script>
</body>
</html>
